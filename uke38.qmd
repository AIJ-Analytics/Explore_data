---
title: "Uke 38"
format: html
editor: visual
---

```{r}
library(tidyverse)
library()
library(readxl)
library(PxWebApiData)
library(writexl)
library(readxl)
library(reshape2)
```

## Uke 38

#Dag 18.09.2025

## Three Variables

-   Kan gjøre det via et 3-d plot (ikke så sykt bruktbart)

Har man en kontirnuerlig variabel, kan man bruke størrelse, fargemetning (hvor stor fargemetting en har), den tredje er å bruke farger. Men siden vi har en kontinuerlig variabel kan vi ikke ha forksjellige farger, men heller fra lysere til mørkere farge. Bruker man størrelse går de fra mindre til større eller motsatt (alt er mulig så lenge du manipulere koden). Dette gjør ggplot hvis du har en kontinuerlig variabel.

Ved bruk av geom_text() kan man gi navn til de ulike delene, f.eks, bil navn til de ulike variablene, se side 25 av slidse til læraren.

HOSTHOST: Læraren liker bedre størrelser enn farge, bare et sånt lite tips.

-   En annen startegi er Facets, at de blir delt opp i grupper.

Tatt en variabel og delt den i tre ulike grupper. Dette kalles for "faktor/kategori variabel". Dette består av et sett av dummy variabler. Heldigvis så blir det autmatisert i R-studio hvis du gjør det til en faktor, mens i et annet program (Excel) måtte man gjort det manuelt (flere dummy variabler).

Facet_wrap (\~) "fekk ikke sjangs til å følge med eller skrive om dette av læraren"

Ved å legge til en mapping = aes(color = det du skal dele inn i vekt, typ det læraren skreiv cut_number(wt, n = 3)),

fekk ikke til å gjør det under, men skal prøve senere

```{r}
ggplot(
  data = mtcars, 
  mapping = aes(
    x = hp, 
    y = 1609.347/(2*qsec^2)
    )
  ) +
  facet_wrap(~cut_number(wt, n =3)) +
  geom_point(
    aes(colour = cut_number(
      wt, 
      n = 3)
      )
    ) +
  geom_smooth(
    method = "lm", 
    se = FALSE
    )
```

Det går ant å gjør det via ggplot() delen, der du setter inn

Man må legge inn et geom for å legge til alle punktene i en svak farge for at det skal være litt uklart men mulig å se hvor de ulike plotene er. Her ser vi delen der det står Labes, som gjør det til de ulike tonene. Dette hjelper leseren å forstå litt mer.

Der du ser Geom_point ser du at fargen er byttet til svak grå.

```{r}
#new dataframe to use for the grey points
hp_acc <- data.frame(
  hp = mtcars$hp, 
  acc = 1609.347/(2*mtcars$qsec^2)
  )

ggplot(
  data = mtcars, 
  mapping = aes(
    x = hp,
    y = 1609.347/(2*qsec^2))
  ) +
  geom_point(
    data = hp_acc, 
    mapping = aes(x = hp, y = acc), 
    colour = "grey80"
    ) +
  facet_wrap(
    ~cut_number(
      wt, 
      n =3 , 
      labels = c("Light", "Medium", "Heavy")
      )
    ) +
  geom_point(
    mapping = aes(colour = cut_number(
      wt, 
      n = 3, 
      labels = c("Light", "Medium", "Heavy")
      )
      ),
    show.legend = FALSE
    ) +
  geom_smooth(
    method = "lm", 
    se = FALSE
    ) +
  labs(
    y = "Mean acceleration (m/s^2)", 
    colour = "Weight"
    )
```

Stack Overflow er en nettside der du kan finne svar på typiske R problematiske spørsmål. Veldig bra og vi kommer til å bruke det framøve når læraren ikke svarer på det.

## To Facet Variabler

Vi kan og ha Facet for to variabler, ikke bare en.

Da legger vi rekke variabelen før

Det som er endret er istedenfor facet_wrap, har han brukt facet_grid.

Det som kommer før krøllen (\~) er det som kommer på rekkene og det osm kommer etter er det som kommer på kollonene. Da snakker eg om denne koden:

factor(cyl)\~cut_number( wt, n = 3 , labels = c("Light", "Medium", "Heavy"))

```{r}
ggplot(
  data = mtcars, 
  mapping = aes(x = hp, y = 1609.347/(2*qsec^2))
  ) +
  
  geom_point(
    data = hp_acc, 
    mapping = aes(x = hp, y = acc), 
    colour = "grey80"
    ) +
    facet_grid(
    factor(cyl)~cut_number(
      wt, 
      n = 3 , 
      labels = c("Light", "Medium", "Heavy"))
    ) +
  
  geom_point(
    mapping = aes(
      colour = cut_number(
        wt, 
        n = 3, 
        labels = c("Light", "Medium", "Heavy")
        )
      ),
    show.legend = FALSE
    ) +
  
  geom_smooth(
    method = "lm", 
    se = FALSE
    ) +
  
  labs(
    y = "Mean acceleration", 
    colour = "Weight"
    )
```

ggplot er det som ligger i tidyverse.

Noe som heter Latticce som er eldre en ggplott, men eldre enn det klasiske plot programet. Vises på side 32 i slidsene

Ny slide. Transforming Data (chap. 5 r4ds).
